<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>The Phel Language</title>
  <link rel="stylesheet" href="http:&#x2F;&#x2F;127.0.0.1:1111&#x2F;site.css"/>
</head>

<body>
  

<div class="documentation">
    <aside class="documentation__sidebar">
        <div class="logo">
            <svg class="phel-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200.3 167.7"><path d="M6 66l95 96h36V93l-36-74H42L6 56v106h36l24-35"/><path d="M137 93l58-3-12-58-32-26h-34l-16 13-23 9-12 22 46 52z"/><path d="M195 90l-12 57h-13l-2-56M170 147l-13-11h12"/></svg>
        </div>

        <input type="checkbox" id="menu_checkbox">
        <label for="menu_checkbox">
            <svg viewBox="0 0 32 32">
                <path d="M3,3 29,3 M3,16 29,16 M3,29 29,29"></path>
            </svg>
            Menu
        </label>
        <nav>
            <ol>
                
                    <li class="">
                        <a href="http:&#x2F;&#x2F;127.0.0.1:1111&#x2F;documentation&#x2F;master&#x2F;getting-started&#x2F;">Getting started</a>
                    </li>
                
                    <li class="">
                        <a href="http:&#x2F;&#x2F;127.0.0.1:1111&#x2F;documentation&#x2F;master&#x2F;basic-types&#x2F;">Basic Types</a>
                    </li>
                
                    <li class="">
                        <a href="http:&#x2F;&#x2F;127.0.0.1:1111&#x2F;documentation&#x2F;master&#x2F;numbers-and-arithmetic&#x2F;">Numbers and Arithmetic</a>
                    </li>
                
                    <li class="">
                        <a href="http:&#x2F;&#x2F;127.0.0.1:1111&#x2F;documentation&#x2F;master&#x2F;truth-and-boolean-operations&#x2F;">Truth and Boolean operations</a>
                    </li>
                
                    <li class="active">
                        <a href="http:&#x2F;&#x2F;127.0.0.1:1111&#x2F;documentation&#x2F;master&#x2F;control-flow&#x2F;">Control flow</a>
                    </li>
                
                    <li class="">
                        <a href="http:&#x2F;&#x2F;127.0.0.1:1111&#x2F;documentation&#x2F;master&#x2F;global-and-local-bindings&#x2F;">Global and local bindings</a>
                    </li>
                
                    <li class="">
                        <a href="http:&#x2F;&#x2F;127.0.0.1:1111&#x2F;documentation&#x2F;master&#x2F;functions-and-recursion&#x2F;">Functions and Recursion</a>
                    </li>
                
                    <li class="">
                        <a href="http:&#x2F;&#x2F;127.0.0.1:1111&#x2F;documentation&#x2F;master&#x2F;tuple&#x2F;">Tuple (TODO)</a>
                    </li>
                
                    <li class="">
                        <a href="http:&#x2F;&#x2F;127.0.0.1:1111&#x2F;documentation&#x2F;master&#x2F;array&#x2F;">Array (TODO)</a>
                    </li>
                
                    <li class="">
                        <a href="http:&#x2F;&#x2F;127.0.0.1:1111&#x2F;documentation&#x2F;master&#x2F;table&#x2F;">Table (TODO)</a>
                    </li>
                
                    <li class="">
                        <a href="http:&#x2F;&#x2F;127.0.0.1:1111&#x2F;documentation&#x2F;master&#x2F;destructuring&#x2F;">Destructuring</a>
                    </li>
                
                    <li class="">
                        <a href="http:&#x2F;&#x2F;127.0.0.1:1111&#x2F;documentation&#x2F;master&#x2F;macros&#x2F;">Macros (TODO)</a>
                    </li>
                
                    <li class="">
                        <a href="http:&#x2F;&#x2F;127.0.0.1:1111&#x2F;documentation&#x2F;master&#x2F;namespaces&#x2F;">Namespaces</a>
                    </li>
                
                    <li class="">
                        <a href="http:&#x2F;&#x2F;127.0.0.1:1111&#x2F;documentation&#x2F;master&#x2F;php-interop&#x2F;">PHP Interop</a>
                    </li>
                
                    <li class="">
                        <a href="http:&#x2F;&#x2F;127.0.0.1:1111&#x2F;documentation&#x2F;master&#x2F;special-forms&#x2F;">Special forms</a>
                    </li>
                
            </ol>
        </nav>
    </aside>
    <div class="documentation__content">
        
    <h1>Control flow</h1>
    <h2 id="if">If</h2>
<pre style="background-color:#ffffff;">
<span style="color:#4d4d4c;">(</span><span style="color:#8959a8;">if</span><span style="color:#4d4d4c;"> test then else?)
</span></pre>
<p>A control flow structure. First evaluates <em>test</em>. If <em>test</em> evaluates to <code>true</code>, only the <em>then</em> form is evaluated and the result is returned. If <em>test</em> evaluates to <code>false</code> only the <em>else</em> form is evaluated and the result is returned. If no <em>else</em> form is given, <code>nil</code> will be returned.</p>
<p>The <em>test</em> evaluates to <code>false</code> if its value is <code>false</code> or equal to <code>nil</code>. Every other value evaluates to <code>true</code>. In sense of PHP this means (<code>test != null &amp;&amp; test !== false</code>).</p>
<pre style="background-color:#ffffff;">
<span style="color:#4d4d4c;">(</span><span style="color:#8959a8;">if </span><span style="color:#f5871f;">true 10</span><span style="color:#4d4d4c;">) </span><span style="color:#999999;"># evaluates to 10
</span><span style="color:#4d4d4c;">(</span><span style="color:#8959a8;">if </span><span style="color:#f5871f;">false 10</span><span style="color:#4d4d4c;">) </span><span style="color:#999999;"># evaluates to nil
</span><span style="color:#4d4d4c;">(</span><span style="color:#8959a8;">if </span><span style="color:#f5871f;">true </span><span style="color:#4d4d4c;">(print </span><span style="color:#f5871f;">1</span><span style="color:#4d4d4c;">) (print </span><span style="color:#f5871f;">2</span><span style="color:#4d4d4c;">)) </span><span style="color:#999999;"># prints 1 but not 2
</span><span style="color:#4d4d4c;">(</span><span style="color:#8959a8;">if </span><span style="color:#f5871f;">0 </span><span style="color:#4d4d4c;">(print </span><span style="color:#f5871f;">1</span><span style="color:#4d4d4c;">) (print </span><span style="color:#f5871f;">2</span><span style="color:#4d4d4c;">)) </span><span style="color:#999999;"># prints 2
</span><span style="color:#4d4d4c;">(</span><span style="color:#8959a8;">if </span><span style="color:#f5871f;">nil </span><span style="color:#4d4d4c;">(print </span><span style="color:#f5871f;">1</span><span style="color:#4d4d4c;">) (print </span><span style="color:#f5871f;">2</span><span style="color:#4d4d4c;">)) </span><span style="color:#999999;"># prints 2
</span><span style="color:#4d4d4c;">(</span><span style="color:#8959a8;">if </span><span style="color:#4d4d4c;">@[] (print </span><span style="color:#f5871f;">1</span><span style="color:#4d4d4c;">) (print </span><span style="color:#f5871f;">2</span><span style="color:#4d4d4c;">)) </span><span style="color:#999999;"># prints 2
</span></pre><h2 id="case">Case</h2>
<pre style="background-color:#ffffff;">
<span style="color:#4d4d4c;">(</span><span style="color:#8959a8;">case</span><span style="color:#4d4d4c;"> test &amp; pairs)
</span></pre>
<p>Evaluates the <em>test</em> expression. Then iterates over each pair. If the result of the test expression matches the first value of the pair, the second expression of the pair is evaluated and returned. If no match is found, returns nil.</p>
<pre style="background-color:#ffffff;">
<span style="color:#4d4d4c;">(</span><span style="color:#8959a8;">case </span><span style="color:#4d4d4c;">(+ </span><span style="color:#f5871f;">7 5</span><span style="color:#4d4d4c;">)
  </span><span style="color:#f5871f;">3 </span><span style="color:#3e999f;">:small
  </span><span style="color:#f5871f;">12 </span><span style="color:#3e999f;">:big</span><span style="color:#4d4d4c;">) </span><span style="color:#999999;"># Evaluates to :big

</span><span style="color:#4d4d4c;">(</span><span style="color:#8959a8;">case </span><span style="color:#4d4d4c;">(+ </span><span style="color:#f5871f;">7 5</span><span style="color:#4d4d4c;">)
  </span><span style="color:#f5871f;">3 </span><span style="color:#3e999f;">:small
  </span><span style="color:#f5871f;">15 </span><span style="color:#3e999f;">:big</span><span style="color:#4d4d4c;">) </span><span style="color:#999999;"># Evaluates to nil

</span><span style="color:#4d4d4c;">(</span><span style="color:#8959a8;">case </span><span style="color:#4d4d4c;">(+ </span><span style="color:#f5871f;">7 5</span><span style="color:#4d4d4c;">)) </span><span style="color:#999999;"># Evalutes to nil
</span></pre><h2 id="cond">Cond</h2>
<pre style="background-color:#ffffff;">
<span style="color:#4d4d4c;">(</span><span style="color:#8959a8;">cond</span><span style="color:#4d4d4c;"> &amp; pairs)
</span></pre>
<p>Iterates over each pair. If the first expression of the pair evaluates to logical true, the second expression of the pair is evaluated and returned. If no match is found, returns nil.</p>
<pre style="background-color:#ffffff;">
<span style="color:#4d4d4c;">(</span><span style="color:#8959a8;">cond
  </span><span style="color:#4d4d4c;">(neg? </span><span style="color:#f5871f;">5</span><span style="color:#4d4d4c;">) </span><span style="color:#3e999f;">:negative
  </span><span style="color:#4d4d4c;">(pos? </span><span style="color:#f5871f;">5</span><span style="color:#4d4d4c;">) </span><span style="color:#3e999f;">:positive</span><span style="color:#4d4d4c;">)  </span><span style="color:#999999;"># Evaluates to :positive

</span><span style="color:#4d4d4c;">(</span><span style="color:#8959a8;">cond
  </span><span style="color:#4d4d4c;">(neg? </span><span style="color:#f5871f;">5</span><span style="color:#4d4d4c;">) </span><span style="color:#3e999f;">:negative
  </span><span style="color:#4d4d4c;">(neg? </span><span style="color:#f5871f;">3</span><span style="color:#4d4d4c;">) </span><span style="color:#3e999f;">:negative</span><span style="color:#4d4d4c;">) </span><span style="color:#999999;"># Evaluates to nil

</span><span style="color:#4d4d4c;">(</span><span style="color:#8959a8;">cond</span><span style="color:#4d4d4c;">) </span><span style="color:#999999;"># Evaluates to nil
</span></pre><h2 id="loop">Loop</h2>
<pre style="background-color:#ffffff;">
<span style="color:#4d4d4c;">(</span><span style="color:#8959a8;">loop </span><span style="color:#4d4d4c;">[bindings*] expr*)
</span></pre>
<p>Creates a new lexical context with variables defined in bindings and defines a recursion point at the top of the loop.</p>
<pre style="background-color:#ffffff;">
<span style="color:#4d4d4c;">(</span><span style="color:#8959a8;">recur</span><span style="color:#4d4d4c;"> expr*)
</span></pre>
<p>Evaluates the expressions in order and rebinds them to the recursion point. A recursion point can be either a <code>fn</code> or a <code>loop</code>. The recur expressions must match the arity of the recursion point exactly.</p>
<p>Internally <code>recur</code> is implemented as a PHP while loop and therefore prevents the <em>Maximum function nesting level</em> errors.</p>
<pre style="background-color:#ffffff;">
<span style="color:#4d4d4c;">(</span><span style="color:#8959a8;">loop </span><span style="color:#4d4d4c;">[sum </span><span style="color:#f5871f;">0</span><span style="color:#4d4d4c;">
       cnt </span><span style="color:#f5871f;">10</span><span style="color:#4d4d4c;">]
  (</span><span style="color:#8959a8;">if </span><span style="color:#4d4d4c;">(= cnt </span><span style="color:#f5871f;">0</span><span style="color:#4d4d4c;">)
    sum
    (</span><span style="color:#8959a8;">recur </span><span style="color:#4d4d4c;">(+ cnt sum) (dec cnt))))

(</span><span style="color:#8959a8;">fn </span><span style="color:#4d4d4c;">[sum </span><span style="color:#f5871f;">0</span><span style="color:#4d4d4c;"> cnt </span><span style="color:#f5871f;">10</span><span style="color:#4d4d4c;">]
  (</span><span style="color:#8959a8;">if </span><span style="color:#4d4d4c;">(= cnt </span><span style="color:#f5871f;">0</span><span style="color:#4d4d4c;">)
    sum
    (</span><span style="color:#8959a8;">recur </span><span style="color:#4d4d4c;">(+ cnt sum) (dec cnt))))
</span></pre><h2 id="foreach">Foreach</h2>
<pre style="background-color:#ffffff;">
<span style="color:#4d4d4c;">(</span><span style="color:#8959a8;">foreach </span><span style="color:#4d4d4c;">[value valueExpr] expr*)
(</span><span style="color:#8959a8;">foreach </span><span style="color:#4d4d4c;">[key value valueExpr] expr*)
</span></pre>
<p>The <code>foreach</code> special form can be used to iterate over all kind of PHP datastructures. The return value of <code>foreach</code> is always <code>nil</code>. The <code>loop</code> special form should be prefered of the <code>foreach</code> special form whenever possible.</p>
<pre style="background-color:#ffffff;">
<span style="color:#4d4d4c;">(foreach [v [1 2 3]]
  (print v)) # prints 1, 2 and 3

(foreach [k v #{&quot;a&quot; 1 &quot;b&quot; 2}]
  (print k)
  (print v)) # prints &quot;a&quot;, 1, &quot;b&quot; and 2
</span></pre><h2 id="exceptions">Exceptions</h2>
<pre style="background-color:#ffffff;">
<span style="color:#4d4d4c;">(</span><span style="color:#8959a8;">throw</span><span style="color:#4d4d4c;"> expr)
</span></pre>
<p>The <em>expr</em> is evaluated and thrown, therefore <em>expr</em> must return a value that implements PHP's <code>Throwable</code> interface.</p>
<h2 id="try-catch-and-finally">Try, Catch and Finally</h2>
<pre style="background-color:#ffffff;">
<span style="color:#4d4d4c;">(</span><span style="color:#8959a8;">try</span><span style="color:#4d4d4c;"> expr* catch-clause* finally-clause?)
</span></pre>
<p>All expressions are evaluated and if no exception is thrown the value of the last expression is returned. If an exception occurs and a matching <em>catch-clause</em> is provided, its expression is evaluated and the value is returned. If no matching <em>catch-clause</em> can be found the exception is propagated out of the function. Before returning normally or abnormally the optionally <em>finally-clause</em> is evaluated.</p>
<pre style="background-color:#ffffff;">
<span style="color:#4d4d4c;">(</span><span style="color:#8959a8;">try</span><span style="color:#4d4d4c;">) </span><span style="color:#999999;"># evaluates to nil

</span><span style="color:#4d4d4c;">(</span><span style="color:#8959a8;">try 
  </span><span style="color:#4d4d4c;">(</span><span style="color:#8959a8;">throw </span><span style="color:#4d4d4c;">(</span><span style="color:#8959a8;">php/new</span><span style="color:#4d4d4c;"> Exception)) 
  (</span><span style="color:#8959a8;">catch</span><span style="color:#4d4d4c;"> Exception e </span><span style="color:#718c00;">&quot;error&quot;</span><span style="color:#4d4d4c;">)) </span><span style="color:#999999;"># evaluates to &quot;error&quot;

</span><span style="color:#4d4d4c;">(</span><span style="color:#8959a8;">try 
  </span><span style="color:#4d4d4c;">(+ </span><span style="color:#f5871f;">1 1</span><span style="color:#4d4d4c;">)
  (</span><span style="color:#8959a8;">finally </span><span style="color:#4d4d4c;">(print </span><span style="color:#718c00;">&quot;test&quot;</span><span style="color:#4d4d4c;">))) </span><span style="color:#999999;"># Evaluates to 2 and prints &quot;test&quot;

</span><span style="color:#4d4d4c;">(</span><span style="color:#8959a8;">try 
  </span><span style="color:#4d4d4c;">(</span><span style="color:#8959a8;">throw </span><span style="color:#4d4d4c;">(</span><span style="color:#8959a8;">php/new</span><span style="color:#4d4d4c;"> Exception)) 
  (</span><span style="color:#8959a8;">catch</span><span style="color:#4d4d4c;"> Exception e </span><span style="color:#718c00;">&quot;error&quot;</span><span style="color:#4d4d4c;">)
  (</span><span style="color:#8959a8;">finally </span><span style="color:#4d4d4c;">(print </span><span style="color:#718c00;">&quot;test&quot;</span><span style="color:#4d4d4c;">))) </span><span style="color:#999999;"># evaluates to &quot;error&quot; and prints &quot;test&quot;
</span></pre><h2 id="statements-do">Statements (do)</h2>
<pre style="background-color:#ffffff;">
<span style="color:#4d4d4c;">(</span><span style="color:#8959a8;">do</span><span style="color:#4d4d4c;"> expr*)
</span></pre>
<p>Evaluates the expressions in order and returns the value of the last expression. If no expression is given, <code>nil</code> is returned.</p>
<pre style="background-color:#ffffff;">
<span style="color:#4d4d4c;">(</span><span style="color:#8959a8;">do </span><span style="color:#f5871f;">1 2 3 4</span><span style="color:#4d4d4c;">) </span><span style="color:#999999;"># Evaluates to 4
</span><span style="color:#4d4d4c;">(</span><span style="color:#8959a8;">do </span><span style="color:#4d4d4c;">(print </span><span style="color:#f5871f;">1</span><span style="color:#4d4d4c;">) (print </span><span style="color:#f5871f;">2</span><span style="color:#4d4d4c;">) (print </span><span style="color:#f5871f;">3</span><span style="color:#4d4d4c;">)) </span><span style="color:#999999;"># Print 1, 2, and 3
</span></pre>

    </div>
</div>

<script src="/livereload.js?port=1024&amp;mindelay=10"></script></body>

</html>